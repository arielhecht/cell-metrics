# cell-metrics
This repository includes supplementary R scripts to accompany the 2018 paper "Reproducing bench-scale cell growth and productivity"

Here is a summary of all the files in this repository:

Experimental Design scripts

exp_table_generator.R--This function takes a fractional factorial design table, generated by FrF2, and adds centerpoints and blank rows. The confounding structure of the design can be accessed by the design.info function (see FrF2 function documentation).

exp_table_metadata.R--This function adds metadata columns to the design_table

exp_table_randomizer.R--This function randomizes the run order of a design table, and assigns wells (based on a 96-well format) for running and analyzing the experiment.

osmolality_calculator.R--This function calculates the osmolality of the composed media, and, if that differs from the osmolality level in design_table, calculates the concentration of salt needed to be added to the media to achieve the desired osmolality.

pH_calculator.R--This function calculates the concentration of phosphate salts needed to achieve the desired pH and buffer capacity.

stock_volume_calculator.R--Calculates the volume of stock solution of that media component needed to mix to generate a media of desired volume (all volume units in microliters)

Experimental design.Rmd--This R notebook contains all of the factor lists (with factor levels) for factorial experimental designs, and calls all of the above functions to create an experimental design table based on the specified set of factors, number of runs, and design resolution of a fractional factorial design, and then randomly assigns runs to wells within a user-defined region.


Data analysis scripts

DCM_analysis.R--This function calibrates measurements of OD700 to dry cell mass, in units of mg/L.

Lycopene_analysis.R--This function calibrates lycopene absorbance measurements (at 400, 447, 474, 505 and 600 nm), to the concentration of lycopene at the two main absorbance peaks (475 and 507 nm) in units of mg/L. 

RFP_analysis.R--This function takes in raw measurements of fluorescence, and calculates the RFP titer, based on user-supplied values for dilution and volume.

Main_effects_calculator.R--This function calculates the main effects and interaction of every factor in the experimental factor list. This function calculates the effect, relative effect, and relative effect magnitude.

Lycopene_data_transformation.R--This notebook reads in the raw data from the lycopene experiments (e26-28, e30-32, e37-38, e44-48), performs the calibrations, and outputs a tidy experimental data table, with a column for each factor and a row for each observation. The input to this script is Supplementary Data File S4. 

Lycopene_plotting.Rmd--This notebook has some data processing scripts, and then generates the publication figures for the lycopene data. The input to this script is the output from Lycopene_data_transformation.R.

Lycopene_RFP_comparative_plotting.Rmd--This notebook generates figures for comparing RFP and lycopene data. The input to this script is the output from Lycopene_data_transformation.R and Supplementary Data File S4. 

RFP_plotting.Rmd--This notebook cleans up data for generating the publication figures, and then generates the publication figures for the RFP data. The input to this script is Supplementary Data File S4. 
